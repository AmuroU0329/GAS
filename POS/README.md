# 学園祭向けPOSシステム (GAS POS System)

Google Apps Script (GAS) と Google スプレッドシートを利用して作成した、学園祭の物販向けの簡易POSシステムです。

## ✨ 主な機能

-   🛒 **Webアプリによる会計機能**: シンプルなUIで直感的に会計作業ができます。
-   📊 **販売履歴の自動記録**: 会計が完了すると、自動でスプレッドシートに販売履歴が記録されます。
-   📦 **リアルタイム在庫確認**: Webアプリ上から現在の在庫状況を確認できます。
-   💰 **レジ金管理**: 事前の制作費や初期のレジ金を記録し、売上を自動計算します。
-   ↩️ **返金・変更対応**: 販売履歴を確認し、返金などのイレギュラー対応も可能です。

## 🧩 システム構成

本システムは、以下の2つの要素で構成されています。

1.  **Webアプリケーション (操作画面)**
    -   **URL**: `https://script.google.com/macros/s/AKfycbw1MOfqAQtmAPL0QLguE8C14VTmosKZRV3GAmMX68f6iDheyt1ctkbN4ts0Ir36n0cCAA/exec`
    -   レジ係が主に使用するインターフェースです。以下の画面があります。
        -   `会計画面`: 商品を選択し、会計処理を行うメイン画面。
        -   `返金/変更`: 購入履歴を一覧で確認できます。
        -   `在庫確認`: `在庫管理`シートの内容をそのまま表示します。

2.  **Google スプレッドシート (データベース)**
    -   **URL**: `https://docs.google.com/spreadsheets/d/1e9EaW4PyIBVovvPvK4EfLX1NPlEsUUOf517tXHgdYsI/edit?usp=sharing`
    -   商品のマスタデータや販売記録などを管理するデータベースです。
        -   `Products`シート: 商品名、価格、画像パスを登録します。
        -   `販売履歴`シート: Webアプリからの会計情報が自動で記録されます。**最新の購入がハイライト表示**されるため、受け渡し係が参照します。(`購入番号0`の行はテンプレートなので削除しないでください)
        -   `在庫管理`シート: 商品の在庫を管理します。**ここへの入力は手動です。**
        -   `レジ金管理`シート: 制作費と初期のレジ金を事前に手入力します。

---

## 🚀 準備・設定方法

運営前に、スプレッドシートで以下の準備を完了させてください。

1.  **商品登録**
    -   `Products`シートに、販売する商品の「商品名」「価格」「画像」を入力します。

2.  **在庫情報入力**
    -   `在庫管理`シートの左側に、「ID」「商品名」「販売個数」の初期値を手入力します。

3.  **レジ金入力**
    -   `レジ金管理`シートに、「制作費」と「最初のレジ金」の金額を入力します。

---

## 🛠️ 運用マニュアル (要調整)

当日のオペレーションは、以下の役割分担を想定しています。

-   **レジ係**: Webアプリの`会計画面`を操作してお客様対応をします。
-   **受け渡し係**: スプレッドシートの`販売履歴`シートを見て、商品を準備・提供します。

### レジ係の手順

1.  お客様に希望の商品をヒアリングします。
2.  購入する商品と個数をお客様と相互に確認します。
3.  Webアプリに商品と個数を入力し、合計金額を提示します。
4.  代金を受け取り、お釣りを渡します。
5.  Webアプリの「会計」ボタンを押し、取引を完了させます。

### 受け渡し係の手順

1.  レジ係が確認している注文内容を聞き、商品を準備し始めます。
2.  レジ係が会計を完了させると`販売履歴`シートの最上部に新しい行がハイライト表示されるので、その内容を最終確認します。
3.  お客様に商品を受け渡します。

### 返金対応

返金処理を行うと、`販売履歴`シートにマイナスの金額として記録されます。

---

## ⚙️ システムアーキテクチャ

このシステムは、**GASが直接書き込みを行っているのは`販売履歴`シートのみ**です。
在庫数の計算や売上集計など、それ以外の処理はすべてスプレッドシートの関数 (`QUERY`, `SUMIF`など) によって実現されています。

## 🔗 関連リンク

-   **第3回皐槻祭で作成した電卓 (参考)**: `https://docs.google.com/spreadsheets/d/1Oc2GFSdVdHgypvYhsVMDP_t1EJYKxEY3ETjjJwW9AYQ/edit?gid=204381683#gid=204381683`
